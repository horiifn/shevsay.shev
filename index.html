<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHEVSAY SKINS</title>
    <link rel="icon" type="image/png" href="https://assets.lis-skins.com/market_images/150567_b.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@800&display=swap');

        /* === НОВАЯ ЦВЕТОВАЯ ПАЛИТРА И СТИЛИ === */
        :root {
            --bg-color: #111214;
            --surface-color: #1A1B1E;
            --primary-text-color: #F0F2F5;
            --secondary-text-color: #8A91A0;
            --border-color: #2C2D30;
            --border-hover-color: #4A4C52;
            
            /* Акцентный цвет (заменил оранжевый на синий для более чистого вида) */
            --accent-color: #3482F6;
            --accent-color-hover: #5A9BFF;

            /* Новые цвета редкости (без розового/фиолетового) */
            --quality-mil-spec: #4A90E2;      /* Синий */
            --quality-restricted: #48BCA0;    /* Бирюзовый/Зеленоватый */
            --quality-classified: #E94C4C;    /* Красный */
            --quality-prime: #E6A23C;         /* Золотой */
        }

        body {
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            font-family: 'Inter', sans-serif;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        img {
            pointer-events: none;
        }

        /* --- Обновленная Шапка сайта --- */
        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 48px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(16px);
            background-color: rgba(17, 18, 20, 0.7);
        }
        .logo { 
            width: 70px; 
            height: auto; 
            transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); 
        }
        .logo:hover { 
            transform: scale(1.08) rotate(-5deg); 
        }

        .social-nav { 
            display: flex; 
            gap: 20px; 
        }
        .social-link {
            color: var(--secondary-text-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            padding: 8px 12px;
            border-radius: 6px;
            position: relative;
            transition: color 0.3s ease, background-color 0.3s ease;
        }
        .social-link:hover { 
            color: var(--primary-text-color);
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* --- Обновленный Основной контент --- */
        .page-content { 
            display: flex; 
            padding: 40px 48px; 
            gap: 40px; 
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* --- Обновленная Панель фильтров --- */
        .filter-sidebar { 
            width: 280px; 
            flex-shrink: 0; 
        }
        .filter-sidebar h2 {
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 30px;
            font-size: 1.2rem;
            color: var(--secondary-text-color);
        }
        .filter-group { 
            margin-bottom: 20px; 
        }
        .category-filter details { 
            margin-bottom: 5px; 
        }
        .category-filter summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            list-style: none;
            transition: background-color 0.2s ease;
        }
        .category-filter summary:hover { 
            background-color: var(--surface-color); 
        }
        .category-filter summary::-webkit-details-marker { 
            display: none; 
        }
        .category-filter summary::after {
            content: '';
            width: 18px;
            height: 18px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%238A91A0' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-size: contain;
            transition: transform 0.25s ease-in-out;
        }
        details[open] > summary::after { 
            transform: rotate(180deg); 
        }
        .sub-category-list { 
            padding-left: 20px; 
            margin-top: 10px; 
            border-left: 1px solid var(--border-color);
            margin-left: 12px;
        }
        .checkbox-container {
            display: block;
            position: relative;
            padding-left: 30px;
            margin-bottom: 15px;
            cursor: pointer;
            font-size: 0.95em;
        }
        .checkbox-container input { 
            position: absolute; 
            opacity: 0; 
        }
        .checkmark {
            position: absolute;
            top: 1px;
            left: 0;
            height: 18px;
            width: 18px;
            background-color: transparent;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            transition: all 0.2s ease;
        }
        .checkbox-container:hover input ~ .checkmark { 
            border-color: var(--border-hover-color); 
        }
        .checkbox-container input:checked ~ .checkmark { 
            background-color: var(--accent-color); 
            border-color: var(--accent-color); 
        }
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 5px;
            top: 2px;
            width: 4px;
            height: 8px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        .checkbox-container input:checked ~ .checkmark:after { 
            display: block; 
        }
        
        /* --- Обновленная Область с контентом --- */
        .content-area { 
            flex-grow: 1; 
        }
        .content-area h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            margin: 0 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: linear-gradient(90deg, #FFFFFF, #B0B5C0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .content-area .prompt {
            color: var(--secondary-text-color);
            font-size: 1.1em;
            max-width: 600px;
            margin-bottom: 40px;
            line-height: 1.6;
        }
        .skins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 24px;
        }

        /* --- НОВЫЙ ДИЗАЙН КАРТОЧЕК V5 (MINIMALIST) --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .skin-card {
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.4s ease-out forwards;
            animation-delay: calc(var(--delay) * 50ms);
        }
        
        .skin-card:hover {
            transform: translateY(-6px);
            border-color: var(--border-hover-color);
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.2), 0 0 0 3px var(--rarity-color, var(--accent-color));
        }

        /* Кликабельная область для открытия модального окна */
        .skin-card-clickable-area {
            cursor: pointer;
        }

        .skin-image-wrapper {
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: repeating-linear-gradient(
                -45deg,
                var(--bg-color),
                var(--bg-color) 5px,
                rgba(255, 255, 255, 0.02) 5px,
                rgba(255, 255, 255, 0.02) 10px
            );
        }
        .skin-image-wrapper img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .skin-card:hover .skin-image-wrapper img { 
            transform: scale(1.1); 
        }
        
        .skin-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border-top: 1px solid var(--border-color);
        }
        
        .skin-header {
            min-height: 50px;
        }
        .skin-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0 0 12px 0;
        }
        .rarity-tag {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 5px 12px;
            border-radius: 99px; /* Pill shape */
            color: #fff;
            background-color: var(--rarity-color);
            display: inline-block;
        }
        
        .skin-footer {
            margin-top: 20px;
        }
        .skin-price {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }

        /* --- НОВЫЕ МИНИМАЛИСТИЧНЫЕ КНОПКИ --- */
        .buy-button, .inspect-button {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            width: 100%;
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        /* Основная кнопка */
        .buy-button {
            background-color: var(--accent-color);
            color: white;
            border: 1px solid var(--accent-color);
        }
        .buy-button:hover {
            background-color: var(--accent-color-hover);
            border-color: var(--accent-color-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 130, 246, 0.3);
        }
        /* Второстепенная кнопка (ghost) */
        .inspect-button {
            background-color: transparent;
            color: var(--primary-text-color);
            border: 1px solid var(--border-color);
        }
        .inspect-button:hover {
            background-color: var(--border-hover-color);
            border-color: var(--border-hover-color);
            color: var(--primary-text-color);
        }

        .quality-mil-spec { --rarity-color: var(--quality-mil-spec); }
        .quality-restricted { --rarity-color: var(--quality-restricted); }
        .quality-classified { --rarity-color: var(--quality-classified); }
        .quality-prime { --rarity-color: var(--quality-prime); }
        
        /* --- Обновленное Модальное окно --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(17, 18, 20, 0.7);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal-overlay.show { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 40px;
            width: 90%;
            max-width: 650px;
            text-align: center;
            transform: scale(0.95) translateY(10px);
            transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
        }
        .modal-overlay.show .modal-content { 
            transform: scale(1) translateY(0);
        }
        .modal-image-container img {
            max-width: 100%;
            height: auto;
            max-height: 65vh;
            margin-bottom: 20px;
        }
        .modal-content .skin-name { font-size: 2rem; margin: 15px 0 10px; }
        .modal-content .skin-price { font-size: 1.5rem; color: var(--secondary-text-color); }
        .modal-close {
            position: absolute; top: 15px; right: 20px;
            font-size: 2.5rem;
            line-height: 1;
            color: var(--secondary-text-color);
            cursor: pointer;
            transition: transform 0.3s ease, color 0.3s ease;
        }
        .modal-close:hover { transform: scale(1.1) rotate(90deg); color: var(--primary-text-color); }

        /* Адаптивность */
        @media (max-width: 1200px) {
            .page-content { flex-direction: column; padding: 32px; }
            .filter-sidebar { width: 100%; display: flex; flex-wrap: wrap; gap: 20px; }
            .filter-sidebar h2 { display: none; }
            .filter-group { flex: 1 1 250px; }
        }
        @media (max-width: 768px) {
            .site-header { flex-direction: column; gap: 15px; padding: 15px 20px; }
            .content-area h1 { font-size: 2.5rem; }
            .skins-grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
        }
    </style>
</head>
<body>

<header class="site-header">
    <div class="logo-container">
        <img src="https://assets.lis-skins.com/market_images/150567_b.png" alt="Shevsay Skins Logo" class="logo">
    </div>
    <nav class="social-nav">
        <a href="https://www.twitch.tv/shevsay" target="_blank" class="social-link">Twitch</a>
        <a href="https://t.me/shevsay" target="_blank" class="social-link">Telegram</a>
        <a href="https://steamcommunity.com/id/ShevTv/" target="_blank" class="social-link">Steam</a>
        <a href="https://www.donationalerts.com/r/shevsay" target="_blank" class="social-link">Поддержать</a>
    </nav>
</header>

<div class="page-content">
    <aside class="filter-sidebar" id="filterSidebar"></aside>

    <main class="content-area">
        <h1 id="contentTitle">Избранное</h1>
        <p class="prompt" id="contentPrompt">
            Добро пожаловать! Ниже представлены самые популярные и интересные награды. 
            Чтобы найти больше скинов, воспользуйтесь фильтрами слева.
        </p>
        <div class="skins-grid" id="skinsGrid"></div>
    </main>
</div>

<!-- Модальное окно -->
<div class="modal-overlay" id="skinModal">
    <div class="modal-content">
        <span class="modal-close" id="modalClose">×</span>
        <div class="modal-image-container">
            <img id="modalImage" src="" alt="Skin Image">
        </div>
        <h2 id="modalName" class="skin-name"></h2>
        <p id="modalPrice" class="skin-price"></p>
    </div>
</div>


<script>
    const filterData = {
        'Нож': ['Bayonet', 'Bowie Knife', 'Butterfly Knife', 'Classic Knife', 'Falchion Knife', 'Flip Knife', 'Gut Knife', 'Huntsman Knife', 'Karambit', 'Kukri Knife', 'M9 Bayonet', 'Navaja Knife', 'Nomad Knife', 'Paracord Knife', 'Shadow Daggers', 'Skeleton Knife', 'Stiletto Knife', 'Survival Knife', 'Talon Knife', 'Ursus Knife'],
        'Перчатки': ['Bloodhound Gloves', 'Broken Fang Gloves', 'Driver Gloves', 'Hand Wraps', 'Hydra Gloves', 'Moto Gloves', 'Specialist Gloves', 'Sport Gloves'],
        'Пистолет': ['CZ75-Auto', 'Desert Eagle', 'Dual Berettas', 'Five-SeveN', 'Glock-18', 'P2000', 'P250', 'R8 Revolver', 'Tec-9', 'USP-S'],
        'Пистолет-пулемет': ['MAC-10', 'MP5-SD', 'MP7', 'MP9', 'P90', 'PP-Bizon', 'UMP-45'],
        'Винтовка': ['AK-47', 'AUG', 'FAMAS', 'G3SG1', 'Galil AR', 'M4A1-S', 'M4A4', 'SCAR-20', 'SG 553'],
        'Снайперская винтовка': ['AWP', 'SSG 08'],
        'Дробовик': ['MAG-7', 'Nova', 'Sawed-Off', 'XM1014'],
        'Пулемет': ['M249', 'Negev'],
        'Другое': ['Агент', 'Брелок', 'Граффити', 'Кейсы', 'Капсулы', 'Наклейки', 'Прайм статус']
    };
    const rarityNames = { 'mil-spec': 'Армейское', 'restricted': 'Запрещенное', 'classified': 'Засекреченное', 'prime': 'Прайм' };
    
    const skins = [
        { name: "SG 553 | Старина Ржавчик", price: 2000, image: "https://assets.lis-skins.com/market_images/147018_b.png", quality: "mil-spec", type: 'SG 553', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572722737A45030988106D2352757034773417469" },
        { name: "M4A1-S | Северный лес", price: 3000, image: "https://assets.lis-skins.com/market_images/9254_b.png", quality: "mil-spec", type: 'M4A1-S', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199303684554A44905774809D16296880026125316388" },
        { name: "USP-S | Билет в ад", price: 5000, image: "https://assets.lis-skins.com/market_images/152529_b.png", quality: "restricted", type: 'USP-S', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199438776871A45024021638D6930585498007975757" },
        { name: "AWP | Капилляры", price: 6500, image: "https://assets.lis-skins.com/market_images/145952_b.png", quality: "mil-spec", type: 'AWP', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572539934A45225672298D7953429965043849259" },
        { name: "AWP | Ахерон", price: 7000, image: "https://assets.lis-skins.com/market_images/60231_b.png", quality: "mil-spec", type: 'AWP', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572896403A45159972133D7083188519541208581" },
        { name: "M4A1-S | Нитро", price: 8000, image: "https://assets.lis-skins.com/market_images/9352_b.png", quality: "restricted", type: 'M4A1-S', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572287354A45195408169D11595088990574181802" },
        { name: "Desert Eagle | Рельсотрон", price: 14000, image: "https://assets.lis-skins.com/market_images/141501_b.png", quality: "restricted", type: 'Desert Eagle', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199440151155A45128185757D6928826125758235369" },
        { name: "M4A1-S | Ночной ужас", price: 17000, image: "https://assets.lis-skins.com/market_images/152536_b.png", quality: "restricted", type: 'M4A1-S', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572819281A45080235516D7254221815132699524" },
        { name: "AK-47 | Затерянная земля", price: 18000, image: "https://assets.lis-skins.com/market_images/141457_b.png", quality: "mil-spec", type: 'AK-47', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572434062A44885517882D875563960137574909" },
        { name: "M4A4 | Мастер травли", price: 20000, image: "https://assets.lis-skins.com/market_images/169019_b.png", quality: "restricted", type: 'M4A4', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572630510A45151099175D778032169458304708" },
        { name: "Glock-18 | Ядерный сад", price: 25000, image: "https://assets.lis-skins.com/market_images/60260_b.png", quality: "classified", type: 'Glock-18', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572445118A45094219615D10125937820632625068" },
        { name: "USP-S | Сайрекс", price: 25000, image: "https://assets.lis-skins.com/market_images/16349_b.png", quality: "classified", type: 'USP-S', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199573451498A45097115098D6937338527307919745" },
        { name: "AWP | Экзоскелет", price: 79999, image: "https://assets.lis-skins.com/market_images/148247_b.png", quality: "classified", type: 'AWP', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572102697A45093761532D7559864608688361997" },
        { name: "AK-47 | Ледяной Уголь", price: 85000, image: "https://assets.lis-skins.com/market_images/156705_b.png", quality: "classified", type: 'AK-47', inspectLink: "steam://rungame/730/76561202255233023/+csgo_econ_action_preview%20S76561199572723112A45089616112D5242903052168340793" },
        { name: "Прайм статус в CS2", price: 199999, image: "https://assets.lis-skins.com/market_images/150602_b.png", quality: "prime", type: 'Прайм статус' }
    ];

    document.addEventListener('DOMContentLoaded', () => {
        const grid = document.getElementById('skinsGrid');
        const filterSidebar = document.getElementById('filterSidebar');
        const contentTitle = document.getElementById('contentTitle');
        const contentPrompt = document.getElementById('contentPrompt');
        
        const modal = document.getElementById('skinModal');
        const modalClose = document.getElementById('modalClose');
        const modalImage = document.getElementById('modalImage');
        const modalName = document.getElementById('modalName');
        const modalPrice = document.getElementById('modalPrice');

        const featuredSkins = ['Прайм статус в CS2', 'AK-47 | Ледяной Уголь', 'AWP | Экзоскелет'];
        let activeFilters = { types: new Set() };

        document.addEventListener('contextmenu', event => event.preventDefault());

        function openModal(skin) {
            modalImage.src = skin.image;
            modalName.textContent = skin.name;
            modalPrice.textContent = `${skin.price.toLocaleString('ru-RU')} баллов`;
            modal.classList.add('show');
        }

        function closeModal() {
            modal.classList.remove('show');
        }

        function renderSkins() {
            grid.innerHTML = '';
            const isFiltered = activeFilters.types.size > 0;
            let skinsToRender;

            if (!isFiltered) {
                skinsToRender = skins.filter(s => featuredSkins.includes(s.name));
                contentTitle.textContent = "Избранное";
                contentPrompt.style.display = 'block';
            } else {
                skinsToRender = skins.filter(skin => activeFilters.types.has(skin.type));
                contentTitle.textContent = "Результаты поиска";
                contentPrompt.style.display = 'none';
            }

            if (skinsToRender.length === 0 && isFiltered) {
                grid.innerHTML = '<p class="prompt">По вашему запросу ничего не найдено. Попробуйте изменить фильтры.</p>';
            }

            skinsToRender.forEach((skin, index) => {
                const card = document.createElement('div');
                card.className = `skin-card quality-${skin.quality || 'default'}`;
                card.style.setProperty('--delay', index);
                const rarityName = rarityNames[skin.quality] || '';
                card.dataset.skinIndex = skins.indexOf(skin);

                let footerActionsHTML;
                if (skin.inspectLink) {
                    footerActionsHTML = `
                        <div class="card-actions">
                            <a href="${skin.inspectLink}" class="inspect-button">Осмотреть</a>
                            <a href="https://www.twitch.tv/shevsay" target="_blank" class="buy-button">Купить</a>
                        </div>
                    `;
                } else {
                    footerActionsHTML = `
                        <div class="card-actions">
                             <a href="https://www.twitch.tv/shevsay" target="_blank" class="buy-button">Купить</a>
                        </div>`;
                }

                card.innerHTML = `
                    <div class="skin-card-clickable-area">
                        <div class="skin-image-wrapper">
                            <img src="${skin.image}" alt="${skin.name}" loading="lazy">
                        </div>
                        <div class="skin-info">
                            <div class="skin-header">
                                <h2 class="skin-name">${skin.name}</h2>
                                ${rarityName ? `<span class="rarity-tag">${rarityName}</span>` : ''}
                            </div>
                        </div>
                    </div>
                    <div class="skin-footer">
                         <p class="skin-price">${skin.price.toLocaleString('ru-RU')} баллов</p>
                         ${footerActionsHTML}
                    </div>
                `;
                
                // Чтобы футер не был частью кликабельной зоны для модального окна,
                // мы вставляем его в .skin-info, но снаружи .skin-card-clickable-area
                // Для этого находим .skin-info и добавляем футер в него.
                const skinInfoDiv = card.querySelector('.skin-info');
                skinInfoDiv.insertAdjacentHTML('beforeend', `
                    <div class="skin-footer">
                         <p class="skin-price">${skin.price.toLocaleString('ru-RU')} баллов</p>
                         ${footerActionsHTML}
                    </div>
                `);

                grid.appendChild(card);
            });
        }
        
        function createFilters() {
            const categoryGroup = document.createElement('div');
            categoryGroup.className = 'filter-group category-filter';
            categoryGroup.innerHTML = '<h2>Фильтры</h2>';

            for (const category in filterData) {
                const details = document.createElement('details');
                const subTypes = filterData[category];
                details.innerHTML = `
                    <summary>
                        <label class="checkbox-container" onclick="event.preventDefault()"> ${category}
                            <input type="checkbox" data-category="${category}">
                            <span class="checkmark"></span>
                        </label>
                    </summary>
                `;

                if (subTypes.length > 0) {
                    const subList = document.createElement('div');
                    subList.className = 'sub-category-list';
                    subTypes.forEach(type => {
                        subList.innerHTML += `
                            <label class="checkbox-container"> ${type}
                                <input type="checkbox" data-type-for-category="${category}" value="${type}">
                                <span class="checkmark"></span>
                            </label>
                        `;
                    });
                    details.appendChild(subList);
                }
                categoryGroup.appendChild(details);
            }
            filterSidebar.appendChild(categoryGroup);
        }

        createFilters();
        renderSkins();

        filterSidebar.addEventListener('click', (e) => {
            const label = e.target.closest('label');
            if (!label) return;
            const checkbox = label.querySelector('input[type="checkbox"]');
            if (!checkbox) return;
            
            if (!e.target.classList.contains('checkmark')) {
                e.preventDefault();
            }

            checkbox.checked = !checkbox.checked;
            
            if (checkbox.dataset.category) {
                const subCheckboxes = document.querySelectorAll(`input[data-type-for-category="${checkbox.dataset.category}"]`);
                subCheckboxes.forEach(sub => {
                    sub.checked = checkbox.checked;
                    if (checkbox.checked) activeFilters.types.add(sub.value); else activeFilters.types.delete(sub.value);
                });
            } else if (checkbox.dataset.typeForCategory) {
                if (checkbox.checked) activeFilters.types.add(checkbox.value); else activeFilters.types.delete(checkbox.value);
            }
            renderSkins();
        });

        grid.addEventListener('click', (e) => {
            // ИЗМЕНЕНО: теперь слушаем клик по .skin-card-clickable-area
            if (e.target.closest('.skin-card-clickable-area')) {
                const card = e.target.closest('.skin-card');
                const skinIndex = card.dataset.skinIndex;
                if (skinIndex !== undefined) {
                    openModal(skins[skinIndex]);
                }
            }
        });

        modalClose.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => (e.target === modal) && closeModal());
        document.addEventListener('keydown', (e) => (e.key === 'Escape') && closeModal());
    });
</script>

</body>
</html>
